import{r as w,h as D,i as U,j as G,e as S,k as g,w as h,l as E,b as k,v as H,T as K,m as W,n as P,p as z,q as F,s as Y,x as Z,o as _,c as A,F as N,y as J,z as b,A as O,d as B,a as x,B as Q,t as X,u as ee,C as te}from"./C1-YZNuB.js";import{u as oe,r as L,g as p,a as T,b as R,s as se,E as ne}from"./D15CGc8L.js";import{_ as le}from"./C8WoHCR9.js";import{_ as ae}from"./C3fzfINs.js";import{_ as re}from"./DlAUqK2U.js";import{P as ie}from"./C_CjKknt.js";function ce(t){let e;const o=w(!1),s=D({...t,originalPosition:"",originalOverflow:"",visible:!1});function a(l){s.text=l}function n(){const l=s.parent,c=m.ns;if(!l.vLoadingAddClassList){let u=l.getAttribute("loading-number");u=Number.parseInt(u)-1,u?l.setAttribute("loading-number",u.toString()):(L(l,c.bm("parent","relative")),l.removeAttribute("loading-number")),L(l,c.bm("parent","hidden"))}r(),v.unmount()}function r(){var l,c;(c=(l=m.$el)==null?void 0:l.parentNode)==null||c.removeChild(m.$el)}function d(){var l;t.beforeClose&&!t.beforeClose()||(o.value=!0,clearTimeout(e),e=setTimeout(f,400),s.visible=!1,(l=t.closed)==null||l.call(t))}function f(){if(!o.value)return;const l=s.parent;o.value=!1,l.vLoadingAddClassList=void 0,n()}const i=S({name:"ElLoading",setup(l,{expose:c}){const{ns:u,zIndex:j}=oe("loading");return c({ns:u,zIndex:j}),()=>{const I=s.spinner||s.svg,M=g("svg",{class:"circular",viewBox:s.svgViewBox?s.svgViewBox:"0 0 50 50",...I?{innerHTML:I}:{}},[g("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),q=s.text?g("p",{class:u.b("text")},[s.text]):void 0;return g(K,{name:u.b("fade"),onAfterLeave:f},{default:h(()=>[E(k("div",{style:{backgroundColor:s.background||""},class:[u.b("mask"),s.customClass,s.fullscreen?"is-fullscreen":""]},[g("div",{class:u.b("spinner")},[M,q])]),[[H,s.visible]])])})}}}),v=U(i),m=v.mount(document.createElement("div"));return{...G(s),setText:a,removeElLoadingChild:r,close:d,handleAfterLeave:f,vm:m,get $el(){return m.$el}}}let y;const ue=function(t={}){if(!W)return;const e=de(t);if(e.fullscreen&&y)return y;const o=ce({...e,closed:()=>{var a;(a=e.closed)==null||a.call(e),e.fullscreen&&(y=void 0)}});me(e,e.parent,o),V(e,e.parent,o),e.parent.vLoadingAddClassList=()=>V(e,e.parent,o);let s=e.parent.getAttribute("loading-number");return s?s=`${Number.parseInt(s)+1}`:s="1",e.parent.setAttribute("loading-number",s),e.parent.appendChild(o.$el),P(()=>o.visible.value=e.visible),e.fullscreen&&(y=o),o},de=t=>{var e,o,s,a;let n;return z(t.target)?n=(e=document.querySelector(t.target))!=null?e:document.body:n=t.target||document.body,{parent:n===document.body||t.body?document.body:n,background:t.background||"",svg:t.svg||"",svgViewBox:t.svgViewBox||"",spinner:t.spinner||!1,text:t.text||"",fullscreen:n===document.body&&((o=t.fullscreen)!=null?o:!0),lock:(s=t.lock)!=null?s:!1,customClass:t.customClass||"",visible:(a=t.visible)!=null?a:!0,beforeClose:t.beforeClose,closed:t.closed,target:n}},me=async(t,e,o)=>{const{nextZIndex:s}=o.vm.zIndex||o.vm._.exposed.zIndex,a={};if(t.fullscreen)o.originalPosition.value=p(document.body,"position"),o.originalOverflow.value=p(document.body,"overflow"),a.zIndex=s();else if(t.parent===document.body){o.originalPosition.value=p(document.body,"position"),await P();for(const n of["top","left"]){const r=n==="top"?"scrollTop":"scrollLeft";a[n]=`${t.target.getBoundingClientRect()[n]+document.body[r]+document.documentElement[r]-Number.parseInt(p(document.body,`margin-${n}`),10)}px`}for(const n of["height","width"])a[n]=`${t.target.getBoundingClientRect()[n]}px`}else o.originalPosition.value=p(e,"position");for(const[n,r]of Object.entries(a))o.$el.style[n]=r},V=(t,e,o)=>{const s=o.vm.ns||o.vm._.exposed.ns;["absolute","fixed","sticky"].includes(o.originalPosition.value)?L(e,s.bm("parent","relative")):T(e,s.bm("parent","relative")),t.fullscreen&&t.lock?T(e,s.bm("parent","hidden")):L(e,s.bm("parent","hidden"))},C=Symbol("ElLoading"),$=(t,e)=>{var o,s,a,n;const r=e.instance,d=l=>F(e.value)?e.value[l]:void 0,f=l=>{const c=z(l)&&(r==null?void 0:r[l])||l;return c&&w(c)},i=l=>f(d(l)||t.getAttribute(`element-loading-${Z(l)}`)),v=(o=d("fullscreen"))!=null?o:e.modifiers.fullscreen,m={text:i("text"),svg:i("svg"),svgViewBox:i("svgViewBox"),spinner:i("spinner"),background:i("background"),customClass:i("customClass"),fullscreen:v,target:(s=d("target"))!=null?s:v?void 0:t,body:(a=d("body"))!=null?a:e.modifiers.body,lock:(n=d("lock"))!=null?n:e.modifiers.lock};t[C]={options:m,instance:ue(m)}},fe=(t,e)=>{for(const o of Object.keys(e))Y(e[o])&&(e[o].value=t[o])},ve={mounted(t,e){e.value&&$(t,e)},updated(t,e){const o=t[C];e.oldValue!==e.value&&(e.value&&!e.oldValue?$(t,e):e.value&&e.oldValue?F(e.value)&&fe(e.value,o.options):o==null||o.instance.close())},unmounted(t){var e;(e=t[C])==null||e.instance.close(),t[C]=null}},ge={label:"",class:"login-form__item"},pe={class:"login-form__footer"},_e=S({__name:"LoginForm",setup(t){const e=w(!1),o=R(),s=async a=>{o.login(a)};return(a,n)=>{const r=ne,d=le,f=ae;return _(),A(N,null,[(_(!0),A(N,null,J(b(o).users,i=>(_(),A("div",ge,[x("div",null,X(i.loginName),1),k(r,{size:"default",type:"success",plain:"",icon:b(se),loading:b(e),onClick:v=>s(i)},null,8,["icon","loading","onClick"])]))),256)),b(o).users.length?Q("",!0):(_(),O(d,{key:0},{default:h(()=>n[0]||(n[0]=[B("Ни одного не зарегистрировано"),x("br",null,null,-1),B("Зарегистрируйтесь")])),_:1})),x("div",pe,[n[2]||(n[2]=x("span",{class:"login-form__footer__descr_link"},"Нет аккаунта?",-1)),k(f,{to:"/register"},{default:h(()=>n[1]||(n[1]=[B(" Зарегистрироваться ")])),_:1})])],64)}}}),be=re(_e,[["__scopeId","data-v-e2ceb512"]]),xe=`
        <path class="path" d="
          M 30 15
          L 28 17
          M 25.61 25.61
          A 15 15, 0, 0, 1, 15 30
          A 15 15, 0, 1, 1, 27.99 7.5
          L 15 15
        " style="stroke-width: 4px; fill: rgba(0, 0, 0, 0)"/>
      `,Ae=S({__name:"login",setup(t){const e=R(),o=w(!0),s=ee();return te(()=>{e.authUser.isAuth&&s.push("/months?"),setTimeout(()=>{e.readUser,o.value=!1},2e3)}),(a,n)=>{const r=ve;return E((_(),O(ie,{title:"Войти как",subtitle:"",symbol:"✉","element-loading-text":"Загрузка...","element-loading-spinner":xe,"element-loading-svg-view-box":"-10, -10, 50, 50","element-loading-background":"rgba(122, 122, 122, 0.8)"},{default:h(()=>[k(be)]),_:1})),[[r,b(o)]])}}});export{Ae as default};
