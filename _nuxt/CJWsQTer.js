import{H as I,G as M,N as T}from"./CiZVhJRQ.js";import{e as H,b as O,c as P}from"./CRnrVMWK.js";import{a as $,E as D}from"./C9-RjnuV.js";import{k as L,a1 as q,q as c,_ as G,M as k,c as u,a as i,b as a,w as s,t as d,F as e,H as E,C as g,J as j,o as n,d as b,$ as z,a0 as K}from"./D7FgQlN6.js";import{i as Q,r as W,P as V,o as v}from"./CSr2QsHi.js";import{u as X}from"./B-1tynIz.js";import{_ as Y}from"./DlAUqK2U.js";const Z={class:"profile"},ee={key:0},oe={key:1},te=L({__name:"personal",setup(le){X({title:"Профиль"});const t=I(),x=q(),m=c(!1),p=c(!1);G(()=>{t.authUser.isAuth||x.push("/login")});const J=U=>{t.deleteUser(U)},N=c(),r=k({...Q,id:t.authUser.id}),F=k(W),w=()=>{m.value=!0},S=()=>{p.value=!0,t.updateUser(r),m.value=!1,p.value=!1};return(U,o)=>{var h,y;const f=M,C=O,_=P,A=D,B=$,R=H;return n(),u("div",Z,[o[6]||(o[6]=i("h1",null,"Профиль",-1)),o[7]||(o[7]=i("p",null,"Здесь вы можете увидеть информацию о вашем профиле:",-1)),a(f,{onClick:w,type:"primary"},{default:s(()=>o[3]||(o[3]=[b("Изменить данные")])),_:1}),i("div",null,"Имя: "+d(e(t).authUser.loginName),1),i("div",null,"Должность: "+d(e(t).authUser.loginJob),1),((h=e(t))==null?void 0:h.authUser.loginJob)===e(V).OPERATOR?(n(),u("div",ee," Оклад: "+d(e(v)[e(t).authUser.loginJob].summa),1)):E("",!0),((y=e(t))==null?void 0:y.authUser.loginJob)===e(V).ASSISTANT?(n(),u("div",oe," Оклад: "+d(e(v)[e(t).authUser.loginJob].summa),1)):E("",!0),e(m)?(n(),g(R,{key:3,onSubmit:j(S,["prevent"]),"label-position":"top",ref_key:"ruleFormRef",ref:N,model:e(r),rules:e(F),"label-width":"120px",class:"login-form","status-icon":""},{default:s(()=>[a(_,null,{default:s(()=>[a(C,{modelValue:e(r).loginName,"onUpdate:modelValue":o[1]||(o[1]=l=>e(r).loginName=l),placeholder:e(t).authUser.loginName,"prefix-icon":e(T)},null,8,["modelValue","placeholder","prefix-icon"])]),_:1}),a(_,null,{default:s(()=>[a(B,{modelValue:e(r).loginJob,"onUpdate:modelValue":o[2]||(o[2]=l=>e(r).loginJob=l),placeholder:e(t).authUser.loginJob,prop:"loginJob"},{default:s(()=>[(n(!0),u(z,null,K(e(v),l=>(n(),g(A,{key:l.title,label:l.title,value:l.title},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1}),a(_,null,{default:s(()=>[a(f,{loading:e(p),"native-type":"submit",type:"success",style:{width:"200px"}},{default:s(()=>o[5]||(o[5]=[b(" Сохранить профиль ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])):(n(),g(f,{key:2,onClick:o[0]||(o[0]=l=>J(e(t).authUser.id)),type:"danger",style:{width:"200px"}},{default:s(()=>o[4]||(o[4]=[b(" Удалить профиль ")])),_:1}))])}}}),me=Y(te,[["__scopeId","data-v-5ce15ef9"]]);export{me as default};
